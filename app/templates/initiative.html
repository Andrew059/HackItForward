{% extends "base.html" %}

{% block head %}
<title>{{ initiative.name }} | HackItForward</title>

<link rel="stylesheet" href="{{ static('css/challenge.css') }}">
{% endblock %}

{% block body %}
<div class="content" style="margin-top: 110px;">
    <!-- TODO: Implement upvoting system in backend -->
    <!-- <i class="fa fa-caret-up" aria-hidden="true" style="font-size: x-large;"></i>
    <p>12</p>
    <i class="fa fa-caret-down" aria-hidden="true" style="font-size: x-large;"></i> -->
  <div>
    <h2 id="initiative-name" style="text-align: center;">{{ initiative.name }}</h2>
    <!-- TODO:Write backend for this -->
    <p class="font-semibold subheading">This is the subheading that needs to be coded on the backend. It summarizes the project/challenge/tutorial.</p>
    <div class="row level">
      <a>
        <img class="profile-icon" src="{{ static('img/default_profile.jpg') }}"/>
      </a>
      <div class="col-9">
        <a>
          <h4 style="margin: 0">John Fish</h4>
        </a>
        <p style="margin: 0">August 15, 2020 - 14 min read</p>
      </div>
      <div class="row no-space level u-pull-right">
        <a onclick="shareOnFB(window.location.href.toString())" class="col-3 social-icon level-content level-item">
          <i class="fab fa-facebook-square fa-2x" aria-hidden="true"></i>
        </a>
        <a onclick="shareOnTwitter(window.location.href.toString())" class="col-3 social-icon level-content level-item">
          <i class="fab fa-twitter-square fa-2x"></i>
        </a>
        <a onclick="shareOnLinkedIn(window.location.href.toString())" class="col-3 social-icon level-content level-item">
          <i class="fab fa-linkedin fa-2x"></i>
        </a>
        <a onclick="shareOnReddit(window.location.href.toString())" class="col-3 social-icon level-content level-item">
          <i class="fab fa-reddit-square fa-2x"></i>
        </a>
      </div>
    </div>
    <div class="buttons">
      {% block buttons %}
        {% if initiative.can_edit(request.user) %}
          <a class="btn btn-primary" href="{{ initiative.get_edit_url() }}"><i class="zmdi zmdi-edit"></i> Edit</a>
        {% endif %}
      {% endblock %}
    </div>
    <div class="row">
      {% if initiative.image %}
        <img class="img-upload u-margin-auto" src="{{ initiative.image.url }}">
      {% else %}
        <img class="img-upload u-margin-auto" src="{{ static('img/logo.png') }}"  style="max-height: 400px; max-width: 600px;">
      {% endif %}
    </div>
    <div>
      {{ initiative.description|mistune }}
    </div>
    <div class="row">
      <div class="col-12">
        <!-- Challenge Tag -->
        {% if initiative.challenge %}
          <div class="tile level r">
            <div class="tile-avatar">
              <span class="icon">
                <i class="zmdi zmdi-tag" aria-hidden="true"></i>
              </span>
            </div>
            <div class="tile__container">
              <p class="tile__title">Challenge:
                <a href="{{ url('challenge', pk=initiative.challenge.pk) }}" class="tag black">{{ initiative.challenge.name }}</a>
              </p>
            </div>
          </div>
        {% endif %}

        <!-- Tags -->
        {% if initiative.tags.exists() %}
          <div class="tile level r">
            <div class="tile-avatar">
              <span class="icon">
                <i class="zmdi zmdi-tag" aria-hidden="true"></i>
              </span>
            </div>
            <div class="tile__container">
              <p class="tile__title">Tags:
                {% for tag in initiative.tags.all() %}
                  <a href="{{ url('index') }}?type={{ initiative|class_name|lower }}&tag={{ tag.name }}" class="tag white" style="background-color: {{ tag.color }}">{{ tag.name }}</a>
                {% endfor %}
              </p>
            </div>
          </div>
        {% endif %}

        <!-- Creators -->
        <div class="tile level r">
          <div class="tile-avatar">
            <span class="icon">
              <i class="zmdi zmdi-accounts-list" aria-hidden="true"></i>
            </span>
          </div>
          <div class="tile__container">
            <p class="tile__title">Creators:
              {% for creator in initiative.creators.all() %}
                <a href="{{ url('user', pk=creator.pk) }}" class="tag black">{{ creator.username }}</a>
              {% endfor %}
            </p>
          </div>
        </div>

        <!-- Contributors -->
        {% if initiative.contributors and initiative.contributors.exists() %}
          <div class="tile level r">
            <div class="tile-avatar">
              <span class="icon">
                <i class="zmdi zmdi-accounts-list" aria-hidden="true"></i>
              </span>
            </div>
            <div class="tile__container">
              <p class="tile__title">Contributors:
                {% for contributor in initiative.contributors.all() %}
                  <a href="{{ url('user', pk=contributor.pk) }}" class="tag black">{{ contributor.username }}</a>
                {% endfor %}
              </p>
            </div>
          </div>
        {% endif %}

        {% for timestamp in time_labels %}
          <div class="tile level r">
            <div class="tile-avatar">
              <span class="icon">
                <i class="zmdi zmdi-calendar-check" aria-hidden="true"></i>
              </span>
            </div>
            <div class="tile__container">
              <p class="tile__title">{{ timestamp.label }}:
                <span>{{ timestamp.time }}</span>
              </p>
            </div>
          </div>
        {% endfor %}

        <!-- Links -->
        {% if links.exists() %}
          <div class="tile level r">
            <div class="tile-avatar">
              <span class="icon">
                <i class="zmdi zmdi-link" aria-hidden="true"></i>
              </span>
            </div>
            <div class="tile__container">
              <p class="tile__title">Links:
              {% for link in links.all() %}
                <a href="{{ link.href }}" class="tooltip" data-tooltip="{{ link.link.placeholder }}"><i class="zmdi zmdi-{{ link.link.icon }}"></i></a>
              {% endfor %}
              </p>
            </div>
          </div>
        {% endif %}

      </div>
    </div>
  </div>
  <br>
  {% block frames %}
  {% endblock %}
</div>
{% endblock %}
